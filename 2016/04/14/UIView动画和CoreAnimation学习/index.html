<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="swift," />





  <link rel="alternate" href="/atom.xml" title="shiron" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.2" />






<meta name="description" content="(注意:本文为参考刘老师博客中的心得再实践一遍的个人学习笔记,并非原创,建议查看老师写的原文,点击此处阅读原文)
以前在工作中一直都忽视了对动画方面的研究,现在看了一遍刘彦玮大神的博客(偶像啊啊!&amp;gt;&amp;lt;),里面有关于对动画的一些博客,自己重新对动画的知识进行有体系的学习和研究,自己记录下来希望以后能够更好的使用,学习资料来源于iOS动画和特效专题一.从最简单的动画开始在我们刚刚进入iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="UIView动画和CoreAnimation学习">
<meta property="og:url" content="http://yoursite.com/2016/04/14/UIView动画和CoreAnimation学习/index.html">
<meta property="og:site_name" content="shiron">
<meta property="og:description" content="(注意:本文为参考刘老师博客中的心得再实践一遍的个人学习笔记,并非原创,建议查看老师写的原文,点击此处阅读原文)
以前在工作中一直都忽视了对动画方面的研究,现在看了一遍刘彦玮大神的博客(偶像啊啊!&amp;gt;&amp;lt;),里面有关于对动画的一些博客,自己重新对动画的知识进行有体系的学习和研究,自己记录下来希望以后能够更好的使用,学习资料来源于iOS动画和特效专题一.从最简单的动画开始在我们刚刚进入iOS">
<meta property="og:image" content="http://liuyanwei.jumppo.com/assets/uploads/animationAndEffect05.png">
<meta property="og:image" content="http://liuyanwei.jumppo.com/assets/uploads/animationAndEffect01.gif">
<meta property="og:image" content="http://liuyanwei.jumppo.com/assets/uploads/animationAndEffect02.gif">
<meta property="og:image" content="http://liuyanwei.jumppo.com/assets/uploads/animationAndEffect03.gif">
<meta property="og:image" content="http://liuyanwei.jumppo.com/assets/uploads/animationAndEffect04.gif">
<meta property="og:updated_time" content="2016-10-17T12:13:54.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="UIView动画和CoreAnimation学习">
<meta name="twitter:description" content="(注意:本文为参考刘老师博客中的心得再实践一遍的个人学习笔记,并非原创,建议查看老师写的原文,点击此处阅读原文)
以前在工作中一直都忽视了对动画方面的研究,现在看了一遍刘彦玮大神的博客(偶像啊啊!&amp;gt;&amp;lt;),里面有关于对动画的一些博客,自己重新对动画的知识进行有体系的学习和研究,自己记录下来希望以后能够更好的使用,学习资料来源于iOS动画和特效专题一.从最简单的动画开始在我们刚刚进入iOS">
<meta name="twitter:image" content="http://liuyanwei.jumppo.com/assets/uploads/animationAndEffect05.png">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2016/04/14/UIView动画和CoreAnimation学习/"/>


  <title> UIView动画和CoreAnimation学习 | shiron </title>
</head>

<body itemscope itemtype="//schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="//schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">shiron</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="//schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                UIView动画和CoreAnimation学习
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-04-14T11:34:51+08:00" content="2016-04-14">
              2016-04-14
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><strong>(注意:本文为参考刘老师博客中的心得再实践一遍的个人学习笔记,并非原创,建议查看老师写的原文,点击此处<a href="http://liuyanwei.jumppo.com/index.html" target="_blank" rel="external">阅读原文</a>)</strong></p>
<h5 id="以前在工作中一直都忽视了对动画方面的研究-现在看了一遍刘彦玮大神的博客-偶像啊啊-gt-lt-里面有关于对动画的一些博客-自己重新对动画的知识进行有体系的学习和研究-自己记录下来希望以后能够更好的使用-学习资料来源于iOS动画和特效专题"><a href="#以前在工作中一直都忽视了对动画方面的研究-现在看了一遍刘彦玮大神的博客-偶像啊啊-gt-lt-里面有关于对动画的一些博客-自己重新对动画的知识进行有体系的学习和研究-自己记录下来希望以后能够更好的使用-学习资料来源于iOS动画和特效专题" class="headerlink" title="以前在工作中一直都忽视了对动画方面的研究,现在看了一遍刘彦玮大神的博客(偶像啊啊!&gt;&lt;),里面有关于对动画的一些博客,自己重新对动画的知识进行有体系的学习和研究,自己记录下来希望以后能够更好的使用,学习资料来源于iOS动画和特效专题"></a>以前在工作中一直都忽视了对动画方面的研究,现在看了一遍<a href="http://liuyanwei.jumppo.com/index.html" target="_blank" rel="external">刘彦玮</a>大神的博客(偶像啊啊!&gt;&lt;),里面有关于对动画的一些博客,自己重新对动画的知识进行有体系的学习和研究,自己记录下来希望以后能够更好的使用,学习资料来源于<a href="http://liuyanwei.jumppo.com/2015/10/29/iOS-animation-0.html" target="_blank" rel="external">iOS动画和特效专题</a></h5><h3 id="一-从最简单的动画开始"><a href="#一-从最简单的动画开始" class="headerlink" title="一.从最简单的动画开始"></a>一.从最简单的动画开始</h3><p>在我们刚刚进入iOS的学习过程中,最先接触的,肯定是下面这个方式来做简答的动画吧!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">//初始设定</div><div class="line">	animateView.frame = CGRect(x: 0, y: 0, width: 100, height: 100)</div><div class="line">	        animateView.backgroundColor = UIColor.redColor()</div><div class="line">	        </div><div class="line">	 view.addSubview(animateView)</div><div class="line"></div><div class="line">//最简答的动画是这样设置的:</div><div class="line">        </div><div class="line">      UIView.animateWithDuration(1.0, animations: &#123;</div><div class="line">          //动画效果</div><div class="line">          //颜色可以变</div><div class="line">          self.animateView.backgroundColor = UIColor.yellowColor()</div><div class="line">          //大小/位置可变</div><div class="line">          self.animateView.frame = CGRect(x: 200 , y: 200, width: 200, height: 200)</div><div class="line">          //透明度改变</div><div class="line">          self.animateView.alpha = 0.5</div><div class="line">          </div><div class="line">      &#125;) &#123; (isCompletion) in</div><div class="line">          print(&quot;动画结束&quot;)</div><div class="line">      &#125;</div></pre></td></tr></table></figure>
<p>animateWithDurationl里面有四个重载的方法,使用该方法可以实现了很多简单的功能,其中一个还有有阻尼系数和回弹系数,可以设置弹簧效果</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line">//此方法含有阻尼系数和回弹系数</div><div class="line">        UIView.animateWithDuration(0.2, delay: 0, usingSpringWithDamping: 0.5, initialSpringVelocity: 0.5, options: UIViewAnimationOptions.CurveEaseIn, animations: &#123;</div><div class="line">            //大小/位置可变</div><div class="line">            self.animateView.frame = CGRect(x: 200 , y: 200, width: 200, height: 200)</div><div class="line">            &#125;) &#123; (isCompletion) in</div><div class="line">                print(&quot;动画结束&quot;)</div><div class="line">        &#125;</div></pre></td></tr></table></figure>
<h3 id="二-Core-Animation的类图"><a href="#二-Core-Animation的类图" class="headerlink" title="二.Core Animation的类图"></a>二.Core Animation的类图</h3><p><img src="http://liuyanwei.jumppo.com/assets/uploads/animationAndEffect05.png" alt="类图"></p>
<ul>
<li><p>CAAnimation：核心动画的基础类，不能直接使用，负责动画运行时间、速度的控制，本身实现了CAMediaTiming协议。</p>
</li>
<li><p>CAPropertyAnimation：属性动画的基类（通过属性进行动画设置，注意是可动画属性），不能直接使用。</p>
</li>
<li><p>CAAnimationGroup：动画组，动画组是一种组合模式设计，可以通过动画组来进行所有动画行为的统一控制，组中所有动画效果可以并发执行。</p>
</li>
<li><p>CATransition：转场动画，主要通过滤镜进行动画效果设置。</p>
</li>
<li><p>CABasicAnimation：基础动画，通过属性修改进行动画参数控制，只有初始状态和结束状态。</p>
</li>
<li><p>CAKeyframeAnimation：关键帧动画，同样是通过属性进行动画参数控制，但是同基础动画不同的是它可以有多个状态控制。</p>
</li>
</ul>
<h3 id="基本动画CABasicAnimation"><a href="#基本动画CABasicAnimation" class="headerlink" title="基本动画CABasicAnimation"></a>基本动画CABasicAnimation</h3><p>然后按照老师的写法,再自己敲了一遍,在touchesBegan方法里面进行了尝试.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">       let baseAnimation = CABasicAnimation(keyPath: &quot;position&quot;)</div><div class="line">        //fromValue设置起点位置,不设置的时候为当前位置</div><div class="line">//        let point  = CGPoint(x: 100, y: 100)</div><div class="line">//        baseAnimation.toValue = NSValue(CGPoint: point)</div><div class="line">        baseAnimation.byValue = NSValue(CGPoint: CGPoint(x: 100, y: 100))</div><div class="line">        </div><div class="line">        //其他动画属性</div><div class="line">        baseAnimation.duration = 0.2</div><div class="line">        baseAnimation.repeatCount = 1</div><div class="line">        </div><div class="line">        //加速运动</div><div class="line">//        baseAnimation.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseIn)</div><div class="line">        //自定义加速的曲线参数</div><div class="line">        baseAnimation.timingFunction = CAMediaTimingFunction(controlPoints: 0.1, 0, 0.9, 0.7)</div><div class="line">        </div><div class="line">        </div><div class="line">        //这两个属性若不设置，动画执行后回复位</div><div class="line">        baseAnimation.removedOnCompletion = false</div><div class="line">        baseAnimation.fillMode = kCAFillModeForwards</div><div class="line">        </div><div class="line">        //可以在动画中缓存一些</div><div class="line">        //baseAnimation.setValue(NSValue(CGPoint: point), forKey: &quot;startPoint&quot;)</div><div class="line">        //开始动画</div><div class="line">        animateView.layer.addAnimation(baseAnimation, forKey: &quot;TextAnimateView&quot;)</div></pre></td></tr></table></figure>
<p><img src="http://liuyanwei.jumppo.com/assets/uploads/animationAndEffect01.gif" alt=""><br>老师后来提醒了说其实动画只是layer层改变了,实际上,view上的frame还是没有改变,当你再次点击屏幕的时候,view又会回到原来的地方,重新开始这个动画.解决办法是重新设置view.frame :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">//        ----------------</div><div class="line">//        此处设置的代理是为了可以让view.frame同时跟着view.layer一起改变</div><div class="line">        baseAnimation.delegate = self</div><div class="line">        </div><div class="line">        baseAnimation.setValue(NSValue(CGPoint: endPoint), forKey: &quot;endPoint&quot;)</div><div class="line">        baseAnimation.setValue(self.animateView, forKey: &quot;sender&quot;)</div><div class="line">        </div><div class="line">//        ----------------</div><div class="line">//代理方法里面可以获取到view和终点的位置</div><div class="line">override func animationDidStop(anim: CAAnimation, finished flag: Bool) &#123;</div><div class="line">        let endPoint = anim.valueForKey(&quot;endPoint&quot;)?.CGPointValue()</div><div class="line">        let theView = anim.valueForKey(&quot;sender&quot;) as! UIView</div><div class="line">        theView.layer.position = endPoint!</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>keyPath用于区分BasicAnimation动画类型</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line">   可选的KeyPath</div><div class="line">   transform.scale = 比例轉換 </div><div class="line">   transform.scale.x</div><div class="line">   transform.scale.y</div><div class="line">   &#123;</div><div class="line">    //CABasicAnimation(keyPath: &quot;transform.scale&quot;)</div><div class="line">    //CABasicAnimation(keyPath: &quot;transform.scale.x&quot;)</div><div class="line">    //CABasicAnimation(keyPath: &quot;transform.scale.y&quot;)</div><div class="line">    //初始大小</div><div class="line">    transformAnimation.fromValue = NSNumber(float: 1.0)</div><div class="line">    //最终大小</div><div class="line">    transformAnimation.toValue = NSNumber(double: 2.0)</div><div class="line">//  以上缩放是以view的中心点为中心缩放的，如果需要自定义缩放点，可以设置卯点：</div><div class="line">//        //中心点</div><div class="line">        animateView.layer.anchorPoint = CGPointMake(0.5, 0.5)</div><div class="line">//        //左上角</div><div class="line">        animateView.layer.anchorPoint = CGPointMake(0, 0)</div><div class="line">//        //右下角</div><div class="line">        animateView.layer.anchorPoint = CGPointMake(1.0, 1.0)</div><div class="line">   &#125;</div><div class="line">   </div><div class="line">   transform.rotation = 旋轉</div><div class="line">   transform.rotation.x</div><div class="line">   transform.rotation.y</div><div class="line">   transform.rotation.z</div><div class="line">   </div><div class="line">   &#123;</div><div class="line">    	 CABasicAnimation(keyPath: &quot;transform.rotation&quot;)</div><div class="line">    	 CABasicAnimation(keyPath: &quot;transform.rotation.x&quot;)</div><div class="line">    	 CABasicAnimation(keyPath: &quot;transform.rotation.y&quot;)</div><div class="line">    	 CABasicAnimation(keyPath: &quot;transform.rotation.z&quot;)</div><div class="line">    	 //初始角度</div><div class="line">        transformAnimation.fromValue = NSNumber(float: 0)</div><div class="line">        //旋转后角度</div><div class="line">        transformAnimation.toValue = NSNumber(float: 130)</div><div class="line">        </div><div class="line">        </div><div class="line">   &#125;</div><div class="line">   transform.translation</div><div class="line">   transform.translation.x</div><div class="line">   transform.translation.y</div><div class="line">   transform.translation.z</div><div class="line"></div><div class="line">   opacity = 透明度</div><div class="line">   margin</div><div class="line">   zPosition</div><div class="line">   backgroundColor 背景颜色</div><div class="line">   cornerRadius 圆角</div><div class="line">   borderWidth</div><div class="line">   bounds</div><div class="line">   contents</div><div class="line">   contentsRect</div><div class="line">   cornerRadius</div><div class="line">   frame</div><div class="line">   hidden</div><div class="line">   mask</div><div class="line">   masksToBounds</div><div class="line">   opacity</div><div class="line">   position</div><div class="line">   shadowColor</div><div class="line">   shadowOffset</div><div class="line">   shadowOpacity</div><div class="line">   shadowRadius</div><div class="line"></div><div class="line">   */</div></pre></td></tr></table></figure>
<h3 id="CABasicAnimation-组合动画"><a href="#CABasicAnimation-组合动画" class="headerlink" title="CABasicAnimation 组合动画"></a>CABasicAnimation 组合动画</h3><p>所有的动画都是由简单的简单的动画组合成的,所以对基础动画的学习是很重要的的,如果需要复杂的动画,当然是要发挥你的想象力啦~<br>自己按老师的代码敲了一遍,熟悉熟悉~</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">//组合动画</div><div class="line">      func groupAnimation(theView:UIView)&#123;</div><div class="line"></div><div class="line">      //向右平移100</div><div class="line">      let mAnimation = CABasicAnimation(keyPath: &quot;position&quot;)</div><div class="line">      //baseAnimation.fromValue 初始位置，如果不设就是当前位置</div><div class="line">      let endPoint = CGPoint(x: theView.layer.position.x+100, y: theView.layer.position.y)</div><div class="line">      mAnimation.toValue = NSValue(CGPoint:endPoint)//绝对位置</div><div class="line"></div><div class="line">      //baseAnimation.byValue = NSValue(CGPoint:CGPoint(x: 100, y: 0))//相对位置</div><div class="line"></div><div class="line">      //x轴旋转动画</div><div class="line">      let xAnimation = CABasicAnimation(keyPath: &quot;transform.rotation.x&quot;)</div><div class="line">      (xAnimation as CABasicAnimation).byValue =  NSNumber(double:M_PI*500)</div><div class="line">      xAnimation.duration = 1.5</div><div class="line"></div><div class="line">      //y轴旋转动画</div><div class="line">      let yAnimation = CABasicAnimation(keyPath: &quot;transform.rotation.y&quot;)</div><div class="line">      (yAnimation as CABasicAnimation).byValue =  NSNumber(double:M_PI*200)</div><div class="line"></div><div class="line">      //缩放动画</div><div class="line">      let sAnimation = CABasicAnimation(keyPath: &quot;transform.scale&quot;)</div><div class="line">      // 动画选项设定</div><div class="line">      sAnimation.autoreverses = true // 动画结束时执行逆动画</div><div class="line">      // 缩放倍数</div><div class="line">      sAnimation.fromValue = NSNumber(double:0.1) // 开始时的倍率</div><div class="line">      sAnimation.toValue = NSNumber(double:1.5) // 结束时的倍率</div><div class="line"></div><div class="line">      //动画组</div><div class="line">      let groupAnimation = CAAnimationGroup()</div><div class="line"></div><div class="line">      // 动画选项设定，动画组统一设置或者单独设置</div><div class="line">      groupAnimation.duration = 3.0;</div><div class="line">      groupAnimation.repeatCount = 1;</div><div class="line">      groupAnimation.animations = [xAnimation,yAnimation,sAnimation,mAnimation]</div><div class="line">      //这两个属性若不设置，动画执行后回复位</div><div class="line">      groupAnimation.removedOnCompletion = false</div><div class="line">      groupAnimation.fillMode = kCAFillModeForwards</div><div class="line">      groupAnimation.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseIn)//加速运动</div><div class="line">      groupAnimation.delegate = self</div><div class="line">      //可以在动画中缓存一些</div><div class="line">      groupAnimation.setValue(NSValue(CGPoint: endPoint), forKey: &quot;endPoint&quot;)</div><div class="line">      groupAnimation.setValue(theView, forKey: &quot;sender&quot;)</div><div class="line">      //执行动画</div><div class="line">      theView.layer.addAnimation(groupAnimation, forKey: &quot;theViewMoveRotation90&quot;)</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p><img src="http://liuyanwei.jumppo.com/assets/uploads/animationAndEffect02.gif" alt=""></p>
<h3 id="关键帧动画-CAKeyframeAnimation"><a href="#关键帧动画-CAKeyframeAnimation" class="headerlink" title="关键帧动画 CAKeyframeAnimation"></a>关键帧动画 CAKeyframeAnimation</h3><blockquote>
<p>关键帧动画就是在动画控制过程中开发者指定主要的动画状态，至于各个状态间动画如何进行则由系统自动运算补充（每两个关键帧之间系统形成的动画称为“补间动画”），这种动画的好处就是开发者不用逐个控制每个动画帧，而只要关心几个关键帧的状态即可。</p>
</blockquote>
<p>那么,Keyframe顾名思义就是关键点的frame，你可以通过设定CALayer的始点、中间关键点、终点的frame，时间，动画会沿你设定的轨迹进行移动:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">private func KeyframeAnimation(theView:UIView)&#123;</div><div class="line">        </div><div class="line">        //关键帧动画</div><div class="line">        let keyframeAnimation = CAKeyframeAnimation(keyPath: &quot;position&quot;)</div><div class="line">        //弧线位置移动</div><div class="line">        </div><div class="line">        </div><div class="line">        //弧线位置移动</div><div class="line">        let path = CGPathCreateMutable()</div><div class="line">        CGPathMoveToPoint(path, nil, 50, 50)</div><div class="line">        //曲线描述</div><div class="line">        CGPathAddCurveToPoint(path, nil, 50, 50, 700, 300, 30, 500)</div><div class="line">        keyframeAnimation.path = path</div><div class="line">        </div><div class="line">        keyframeAnimation.duration = 1.0 ;</div><div class="line">        keyframeAnimation.beginTime =  CACurrentMediaTime() + 2;</div><div class="line">        theView.layer.addAnimation(keyframeAnimation, forKey: &quot;1111&quot;)</div><div class="line">        </div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p><img src="http://liuyanwei.jumppo.com/assets/uploads/animationAndEffect03.gif" alt=""><br>(插图失败,为了让自己看到效果,继续借图)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">/**</div><div class="line">     先附带上让一些迷糊的属性解释吧,要不然大家好像有点看不懂!</div><div class="line">     （1）values属性</div><div class="line"></div><div class="line">     values属性指明整个动画过程中的关键帧点，例如上例中的A-E就是通过values指定的。需要注意的是，起点必须作为values的第一个值。</div><div class="line"></div><div class="line">     （2）path属性</div><div class="line"></div><div class="line">     作用与values属性一样，同样是用于指定整个动画所经过的路径的。需要注意的是，values与path是互斥的，当values与path同时指定时，path会覆盖values，即values属性将被忽略。例如上述pathAnimation例子</div><div class="line"></div><div class="line">     （3）keyTimes属性</div><div class="line"></div><div class="line">     该属性是一个数组，用以指定每个子路径(AB,BC,CD)的时间。如果你没有显式地对keyTimes进行设置，则系统会默认每条子路径的时间为：ti=duration/(5-1)，即每条子路径的duration相等，都为duration的1\4。当然，我们也可以传个数组让物体快慢结合。例如，你可以传入&#123;0.0, 0.1,0.6,0.7,1.0&#125;，其中首尾必须分别是0和1，因此tAB=0.1-0, tCB=0.6-0.1, tDC=0.7-0.6, tED=1-0.7.....</div><div class="line"></div><div class="line">     （4）timeFunctions属性</div><div class="line"></div><div class="line">     用过UIKit层动画的同学应该对这个属性不陌生，这个属性用以指定时间函数，类似于运动的加速度，有以下几种类型。上例子的AB段就是用了淡入淡出效果。记住，这是一个数组，你有几个子路径就应该传入几个元素</div><div class="line"></div><div class="line">     1 kCAMediaTimingFunctionLinear//线性</div><div class="line">     2 kCAMediaTimingFunctionEaseIn//淡入</div><div class="line">     3 kCAMediaTimingFunctionEaseOut//淡出</div><div class="line">     4 kCAMediaTimingFunctionEaseInEaseOut//淡入淡出</div><div class="line">     5 kCAMediaTimingFunctionDefault//默认</div><div class="line"></div><div class="line">     （5）calculationMode属性</div><div class="line"></div><div class="line">     该属性决定了物体在每个子路径下是跳着走还是匀速走，跟timeFunctions属性有点类似</div><div class="line"></div><div class="line">     1 const kCAAnimationLinear//线性，默认</div><div class="line">     2 const kCAAnimationDiscrete//离散，无中间过程，但keyTimes设置的时间依旧生效，物体跳跃地出现在各个关键帧上</div><div class="line">     3 const kCAAnimationPaced//平均，keyTimes跟timeFunctions失效</div><div class="line">     4 const kCAAnimationCubic//平均，同上</div><div class="line">     5 const kCAAnimationCubicPaced//平均，同上</div><div class="line"></div><div class="line">     */</div></pre></td></tr></table></figure>
<h3 id="转场效果"><a href="#转场效果" class="headerlink" title="转场效果"></a>转场效果</h3><p>转场动画的使用一般分为以下几个步骤：</p>
<ul>
<li>创建转场动画</li>
<li>设置转场类型、子类型（可选）及其他属性</li>
<li>设置转场后的新视图并添加动画到图层</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line">  //步骤1：添加view底图，添加view的左右滑动手势</div><div class="line">    let bg = UIImageView(image: UIImage(named: &quot;x0&quot;))</div><div class="line">    func addBgImageView()&#123;</div><div class="line">        </div><div class="line">        </div><div class="line">        </div><div class="line">        bg.frame = CGRect(x: 0, y: 0, width: UIScreen.mainScreen().bounds.size.width, height: UIScreen.mainScreen().bounds.size.height)</div><div class="line">        view.addSubview(bg)</div><div class="line">        </div><div class="line">        let rightSwipe = UISwipeGestureRecognizer(target: self, action:#selector(ViewController.rightSwipe(_:)))</div><div class="line">        rightSwipe.direction = .Right</div><div class="line">        let leftSwipe = UISwipeGestureRecognizer(target: self, action: #selector(ViewController.leftSwipe(_:)))</div><div class="line">        leftSwipe.direction = .Left</div><div class="line">        </div><div class="line">        view.addGestureRecognizer(rightSwipe)</div><div class="line">        view.addGestureRecognizer(leftSwipe)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">//    步骤2：随机获取图片和随机获取转场效果的函数</div><div class="line">    var images:[UIImage]?</div><div class="line">    func fetchImage()-&gt;UIImage&#123;</div><div class="line">        if images == nil &#123;</div><div class="line">            images = [];</div><div class="line">            </div><div class="line">            for index in 0...5 &#123;</div><div class="line">                let image = UIImage(named: &quot;x&quot; + String(index))</div><div class="line">                images!.append(image!)</div><div class="line">                </div><div class="line">            &#125;</div><div class="line">            </div><div class="line">        &#125;</div><div class="line">        return images![Int(arc4random()%5)]</div><div class="line">        </div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    func swipeTransition(subtype:String) -&gt; CATransition &#123;</div><div class="line">        let transfer = CATransition()</div><div class="line">        </div><div class="line">        /*</div><div class="line">         kCATransitionFade：淡入淡出，默认效果</div><div class="line">         kCATransitionMoveIn：新视图移动到就是图上方</div><div class="line">         kCATransitionPush:新视图推开旧视图</div><div class="line">         kCATransitionReveal：移走旧视图然后显示新视图</div><div class="line">         </div><div class="line">         //苹果未公开的私有转场效果</div><div class="line">         cube:立方体</div><div class="line">         suckEffect:吸走的效果</div><div class="line">         oglFlip:前后翻转效果</div><div class="line">         rippleEffect:波纹效果</div><div class="line">         pageCurl:翻页起来</div><div class="line">         pageUnCurl:翻页下来</div><div class="line">         cameraIrisHollowOpen:镜头开</div><div class="line">         cameraIrisHollowClose:镜头关</div><div class="line">         */</div><div class="line">        </div><div class="line">        let types = [kCATransitionFade,kCATransitionMoveIn,kCATransitionPush,kCATransitionReveal,&quot;cube&quot;,&quot;suckEffect&quot;,&quot;oglFlip&quot;,&quot;rippleEffect&quot;,&quot;pageCurl&quot;,&quot;pageUnCurl&quot;,&quot;cameraIrisHollowOpen&quot;,&quot;cameraIrisHollowClose&quot;]</div><div class="line">        </div><div class="line">        let type = types[Int(arc4random()%11)]</div><div class="line">        </div><div class="line">        transfer.type = type</div><div class="line">        </div><div class="line">        NSLog(&quot;%@&quot;, type)</div><div class="line">        </div><div class="line">        transfer.subtype = subtype</div><div class="line">        transfer.duration = 1</div><div class="line">        return transfer</div><div class="line">    &#125;</div><div class="line">//    步骤3：左右滑动方法，实现场景切换</div><div class="line">    </div><div class="line">    func rightSwipe(rightSwipe:UIGestureRecognizer)&#123;</div><div class="line">        </div><div class="line">        bg.image = fetchImage()</div><div class="line">        bg.layer.addAnimation(swipeTransition(kCATransitionFromRight), forKey: &quot;kCATransitionFromRight&quot;)</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    func leftSwipe(leftSwipe:UIGestureRecognizer)&#123;</div><div class="line">        </div><div class="line">        bg.image = fetchImage()</div><div class="line">        bg.layer.addAnimation(swipeTransition(kCATransitionFromLeft), forKey: &quot;kCATransitionFromleft&quot;)</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p><img src="http://liuyanwei.jumppo.com/assets/uploads/animationAndEffect04.gif" alt=""></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/swift/" rel="tag">#swift</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/03/28/swift中的跑马灯实现（导航栏）/" rel="next" title="swift中的跑马灯实现（导航栏）">
                <i class="fa fa-chevron-left"></i> swift中的跑马灯实现（导航栏）
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/05/05/iOS中模拟发送http请求以及解析xml/" rel="prev" title="iOS中模拟发送http请求以及解析xml">
                iOS中模拟发送http请求以及解析xml <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="//schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://wuzhi.me/avatar/112063.1460211687.jpg"
               alt="shiron" />
          <p class="site-author-name" itemprop="name">shiron</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">25</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-5"><a class="nav-link" href="#以前在工作中一直都忽视了对动画方面的研究-现在看了一遍刘彦玮大神的博客-偶像啊啊-gt-lt-里面有关于对动画的一些博客-自己重新对动画的知识进行有体系的学习和研究-自己记录下来希望以后能够更好的使用-学习资料来源于iOS动画和特效专题"><span class="nav-number">1.</span> <span class="nav-text">以前在工作中一直都忽视了对动画方面的研究,现在看了一遍刘彦玮大神的博客(偶像啊啊!><),里面有关于对动画的一些博客,自己重新对动画的知识进行有体系的学习和研究,自己记录下来希望以后能够更好的使用,学习资料来源于iOS动画和特效专题</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一-从最简单的动画开始"><span class="nav-number"></span> <span class="nav-text">一.从最简单的动画开始</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二-Core-Animation的类图"><span class="nav-number"></span> <span class="nav-text">二.Core Animation的类图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#基本动画CABasicAnimation"><span class="nav-number"></span> <span class="nav-text">基本动画CABasicAnimation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CABasicAnimation-组合动画"><span class="nav-number"></span> <span class="nav-text">CABasicAnimation 组合动画</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关键帧动画-CAKeyframeAnimation"><span class="nav-number"></span> <span class="nav-text">关键帧动画 CAKeyframeAnimation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#转场效果"><span class="nav-number"></span> <span class="nav-text">转场效果</span></a></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">shiron</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.2"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.2"></script>



  



  




  
  

  

  

  

</body>
</html>
